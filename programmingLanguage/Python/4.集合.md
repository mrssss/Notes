# 映射和集合

---

## 字典
* Python里唯一的映射类型
* 键值对
* 使用哈希表存储
* 可以使用除了数字类型以外的值作为键
* 映射中的数据是无序排列的
* 使用{}创建
* 也可以使用{}.fromkeys(keys，value = None)来创建，这个方法会返回一个字典。

```python

# keys必须为iterable的，一般是序列类型，如果是单个元素的元组类型的话
# 也必须给元组加上（key，）
c = {}.fromkeys(('fff',))
# {'fff':None}

d = {}.fromkeys(('x', 'y'))
# {'x':None, 'y':None}

di = {}.fromkeys(('foo', 'bar'), -1)
# {'foo':-1, 'bar':-1}
```
* 可以使用迭代器来访问类序列对象。

```python
dict1 = {'name' : 'earth', 'port' : 80}

# 使用in关键字来遍历字典中的键
for key in dict1:
	print 'key = %s, value = %s' %(key, dict1[key])

# 使用items方法返回字典中所有的键值对，将每个键值放在一个元组之中
# 将所有的元组放在一个列表之中
for key, value in dict1.items():
	print key, " : ", value
```

* 和序列不同，字典可以直接通过索引的方式添加或者修改键对应的值，如果键不存在，则字典类型会自动将该键值对添加，如果键存在，字典会修改该键对应的值。
* 也可以通过update（）方法将整个字典内容添加到另一个字典,如果新的字典和被添加的字典中有相同的键，那么被添加的字典的键值会被更新。
* 使用clear（）清空字典
* 使用del删除引用或某个条目
* 使用pop（）删除并返回某个条目

```python
# 创建一个字典对象
dict2 = {}

# 添加一个元素
dict2['name'] = 'dict2'

# 修改一个元素
dict2['name'] = 'nnn'

# 使用一个字典更新字典
dict2.update(dict1)
# dict2 == {'name': 'earth', 'port': 80}

# 删除一个元素
del dict1['name']

# 清空一个字典
dict1.clear()
#dict1 == {}

# 删除并返回一个元素
dict2.pop('name')

# 删除一个字典的引用
del dict1
del dict2
# 删除引用之后该名字就不存在了
# 以后就不能访问字典了
```

* 序列不支持拼接和重复操作，这些操作对于字典没有意义
* 可以使用dict生成新的字典实现字典的复制，也可以使用copy直接复制，dict比copy慢。
* dict方法可以接受字典或关键字参数字典

```python
# 使用关键字参数字典创建字典
dict3 = dict(x = 1, y = 2)
# dict3 == {'x': 1, 'y': 2}

# 使用dict复制字典， **是函数使用字典传入参数的操作符 
dict4 = dict(**dict3)
# dict4 == {'x': 1, 'y': 2}

# 将dict3的引用赋值给dict_ref，dict_ref可以直接更改dict3的值
dict_ref = dict3
dict_ref['x'] = 'ref'
# dict3 == {'x': 'ref', 'y': 2}
# dict4 == {'x': 1, 'y': 2}

# 使用copy方法实现浅复制
dict5 = dict3.copy()
dict5['x'] = 5
# dict3 == {'x': 'ref', 'y': 2}
# dict5 == {'x': 5, 'y': 2}
```
* 使用hash（obj）方法判断某个对象是否可以做一个字典的键，如果可以返回这个对象的哈希值，如果不可以会产生TypeError错误。


### 字典类型的方法

|函数名|操作|
|:-:|:-:|
|dict.clear()|删除字典中所有元素|
|dict.copy()|返回字典(浅复制)的一个副本|
|dict.fromkeys(seq,val=None)|创建并返回一个新字典，以seq 中的元素做该字典的键，val 做该字典中所有键对应的初始值(如果不提供此值，则默认为None)|
|dict.get(key,default=None)|对字典dict 中的键key,返回它对应的值value，如果字典中不存在此键，则返回default 的值(注意，参数default 的默认值为None)|
|dict.has_key(key)|如果键(key)在字典中存在，返回True，否则返回False. 在Python2.2版本引入in 和not in 后，此方法几乎已废弃不用了，但仍提供一个可工作的接口。|
|dict.items()|返回一个包含字典中(键, 值)对元组的列表|
|dict.keys()|返回一个包含字典中键的列表|
|dict.iter()|方法iteritems(), iterkeys(), itervalues()与它们对应的非迭代方法一样，不同的是它们返回一个迭代子，而不是一个列表。|
|dict.pop(key[, default])|和方法get()相似，如果字典中key 键存在，删除并返回dict[key]，如果key 键不存在，且没有给出default 的值，引发KeyError 异常。|
|dict.setdefault(key,default=None)|和方法set()相似，如果字典中不存在key 键，由dict[key]=default 为它赋值。|
|dict.update(dict2)|将字典dict2 的键-值对添加到字典dict|
|dict.values()|返回一个包含字典中所有值的列表|



## 集合

* 集合对象是一组可哈希的值
* 集合成员可以做字典的键
* 集合支持in操作
* 集合本身是无序的
* 集合有两种不同的类型可变集合（set）和不可变集合（frozenset）
* 可变集合对象本身不是可哈希的，既不能用作字典的键也不可用作其他集合中的元素
* 不可变集合是可哈希的
* 集合类型没有特别的语法格式，只能使用set（）或frozenset（）创建
* 使用add添加成员
* 使用update添加成员
* 使用remove删除成员
* 使用‘-’执行集合差操作，也可以用来删除成员
* 使用>或<来判断集合间子集关系
* 使用|来执行并操作
* 使用&执行交操作
* 使用^执行异或操作，如果在A集合中的元素不在B集合中并上在B集合而不在A集合中的元素